<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Yellow Bus Line</title>
    <!-- Local Bootstrap CSS -->
    <link rel="stylesheet" href="assets/css/bootstrap.min.css" />
    <!-- Site theme styles -->
    <link rel="stylesheet" href="assets/css/site.css" />
    <!-- Component navbar-one styles -->
    <link rel="stylesheet" href="assets/css/navbar-one.css" />
    <!-- Component card-one styles -->
    <link rel="stylesheet" href="assets/css/card-one.css" />
  </head>
  <body>
    <section class="navbar-area navbar-one">
      <div class="container">
        <div class="row">
          <div class="col-lg-12">
            <nav
              class="navbar navbar-expand-lg navbar-dark bg-brand sticky-top"
            >
              <a class="navbar-brand d-flex align-items-center gap-2" href="#">
                <img src="assets/img/logo3.png" alt="Logo" />
              </a>
              <button
                class="navbar-toggler"
                type="button"
                data-bs-toggle="collapse"
                data-bs-target="#navbarOne"
                aria-controls="navbarOne"
                aria-expanded="false"
                aria-label="Toggle navigation"
              >
                <span class="toggler-icon"></span>
                <span class="toggler-icon"></span>
                <span class="toggler-icon"></span>
              </button>
              <div class="collapse navbar-collapse sub-menu-bar" id="navbarOne">
                <ul class="navbar-nav m-auto">
                  <li class="nav-item">
                    <a class="nav-link active" href="#" data-page="home"
                      >Home</a
                    >
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="#" data-page="buses">Buses</a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="#" data-page="tripsched"
                      >Trip Schedule</a
                    >
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="#" data-page="awards">Awards</a>
                  </li>
                </ul>
              </div>
            </nav>
          </div>
        </div>
      </div>
    </section>

    <main class="container py-5" id="content-area">
      <!-- Home Section -->
      <section id="home-content" class="page-content active">
        <div class="row">
          <div class="col-lg-8">
            <h1
              class="display-4 mb-4"
              style="
                color: var(--brand-accent);
                font-family: 'Myriad Pro', sans-serif;
              "
            >
              Welcome to Yellow Bus Line
            </h1>
            <p class="lead">
              Your trusted partner for safe, reliable, and comfortable
              transportation services.
            </p>
            <p>
              Since 1998, we've been committed to providing exceptional transit
              experiences across our service areas. With a modern fleet and
              professional staff, we ensure every journey is smooth and on time.
            </p>
            <div class="mt-4">
              <a
                href="#"
                class="btn btn-lg me-2"
                data-page="buses"
                style="background: var(--brand-accent); color: white"
                >View Our Fleet</a
              >
              <a
                href="#"
                class="btn btn-lg btn-outline-secondary"
                data-page="tripsched"
                >Check Schedule</a
              >
            </div>
          </div>
          <div class="col-lg-4">
            <div
              class="p-4 rounded"
              style="
                background: rgba(248, 240, 0, 0.15);
                border: 2px solid var(--brand-primary);
              "
            >
              <h3 class="h5 mb-3" style="color: var(--brand-accent)">
                Why Choose Us?
              </h3>
              <ul class="list-unstyled">
                <li class="mb-2">✓ 50+ Modern Buses</li>
                <li class="mb-2">✓ Professional Drivers</li>
                <li class="mb-2">✓ On-Time Service</li>
                <li class="mb-2">✓ Safety First</li>
                <li class="mb-2">✓ Competitive Rates</li>
              </ul>
            </div>
          </div>
        </div>
      </section>

      <!-- Content loaded from external pages will be inserted here -->
      <section id="dynamic-content" class="page-content"></section>
    </main>

    <!-- Local Bootstrap JS (bundle includes Popper) -->
    <script src="assets/js/bootstrap.bundle.min.js"></script>
    <script>
      // Single-page app content switching
      (function () {
        const pageFiles = {
          buses: "pages/buses.html",
          tripsched: "pages/tripsched.html",
          awards: "pages/awards.html",
        };

        const navLinks = document.querySelectorAll("[data-page]");
        const contentArea = document.getElementById("dynamic-content");
        const homeContent = document.getElementById("home-content");

        async function loadPageContent(pageId) {
          const filePath = pageFiles[pageId];

          if (!filePath) return;

          try {
            // Reset animation by removing active before swap
            contentArea.classList.remove("active");
            const response = await fetch(filePath);
            const html = await response.text();

            // Parse the HTML and extract the main content
            const parser = new DOMParser();
            const doc = parser.parseFromString(html, "text/html");

            // Try to get main first, then fall back to body content
            let mainContent = doc.querySelector("main");
            if (!mainContent) {
              // For pages without main, get all content between navbar and scripts
              const body = doc.querySelector("body");
              const navbar = body.querySelector(".navbar-area");
              const scripts = body.querySelectorAll("script");

              // Create a container and add all content except navbar
              const tempDiv = document.createElement("div");
              Array.from(body.children).forEach((child) => {
                if (child !== navbar && !child.matches("script")) {
                  tempDiv.appendChild(child.cloneNode(true));
                }
              });
              contentArea.innerHTML = tempDiv.innerHTML;
            } else {
              contentArea.innerHTML = mainContent.innerHTML;
            }

            // Force reflow then re-apply active to trigger animation each load
            void contentArea.offsetWidth;
            contentArea.classList.add("active");
          } catch (error) {
            console.error("Error loading page:", error);
          }
        }

        function showPage(pageId) {
          // Hide/show home content
          if (pageId === "home") {
            homeContent.classList.add("active");
            contentArea.classList.remove("active");
            contentArea.innerHTML = "";
          } else {
            homeContent.classList.remove("active");
            contentArea.classList.add("active");
            loadPageContent(pageId);
          }

          // Remove active from all nav links
          navLinks.forEach((link) => link.classList.remove("active"));

          // Set active nav link
          const activeLink = document.querySelector(`[data-page="${pageId}"]`);
          if (activeLink) {
            activeLink.classList.add("active");
          }

          // Scroll to top of content
          window.scrollTo({ top: 0, behavior: "smooth" });

          // Close mobile menu if open
          const navCollapse = document.getElementById("navbarOne");
          if (navCollapse && navCollapse.classList.contains("show")) {
            const bsCollapse = new bootstrap.Collapse(navCollapse);
            bsCollapse.hide();
          }
        }

        // Add click handlers to all nav links and buttons with data-page
        navLinks.forEach((link) => {
          link.addEventListener("click", function (e) {
            e.preventDefault();
            const pageId = this.getAttribute("data-page");
            showPage(pageId);
          });
        });

        // Show home page by default
        showPage("home");
      })();
    </script>
  </body>
</html>
